<div class="dashboard-container">
  <!-- Error State -->
  <div *ngIf="hasError" class="card error-card">
    <h2>⚠️ Configuration Error</h2>
    <p>{{ errorMessage }}</p>
    <button (click)="loadConfig()" class="retry-button">Retry</button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading && !hasError" class="card loading-card">
    <div class="loading-spinner"></div>
    <p>Loading dashboard...</p>
  </div>

  <!-- Main Content -->
  <ng-container *ngIf="!isLoading && !hasError">
    <app-version-header
      [versionData]="versionData"
      [weeksLeft]="weeksLeft"
      [clockIcon]="clockIcon"
    ></app-version-header>

    <div class="grid">
      <aside class="sidebar">
        <app-roadmap
          [drops]="drops"
          [calendarIcon]="calendarIcon"
          [checkIcon]="checkIcon"
        ></app-roadmap>
      </aside>

      <main class="main">
        <app-team-carousel
          [teams]="teams"
          [activeSlide]="activeSlide"
          [usersIcon]="usersIcon"
          [usersMiniIcon]="usersMiniIcon"
          [chevronIcon]="chevronIcon"
          (slideSelected)="onSlideSelected($event)"
        ></app-team-carousel>
      </main>

      <aside class="rightbar">
        <app-birthday-card
          [upcomingBirthday]="upcomingBirthday"
          [nextBirthday]="nextBirthday"
          [hasUpcomingBirthday]="hasUpcomingBirthday"
          [cakeIcon]="cakeIcon"
        ></app-birthday-card>
      </aside>
    </div>

  <footer class="footer">
    <div class="ticker">
      <span>• HIGH VELOCITY MODE ENABLED</span>
      <span class="ticker-dates"
        >• {{ versionData.startDate | date: 'LLL d, y' }} →
        {{ versionData.endDate | date: 'LLL d, y' }}</span
      >
    </div>
    <div class="status">
      <span class="status-dot"></span>
      <span>SYSTEMS OPERATIONAL</span>
    </div>
  </footer>
  </ng-container>
</div>

<div class="reminder-overlay" *ngIf="showWorkoutReminder && !isLoading">
  <div
    class="reminder-modal card"
    role="dialog"
    aria-modal="true"
    aria-labelledby="workoutReminderTitle"
  >
    <div class="reminder-illustration" aria-hidden="true" [innerHTML]="pushupIcon"></div>
    <div class="reminder-content">
      <p class="reminder-label">Workout Reminder</p>
      <h2 id="workoutReminderTitle">Time for Push-Ups</h2>
      <p class="reminder-text">Take a few minutes for a quick pre-noon set.</p>
      <div class="reminder-window">Shows Sunday–Thursday from 11:45 to 12:00.</div>
    </div>
  </div>
</div>
